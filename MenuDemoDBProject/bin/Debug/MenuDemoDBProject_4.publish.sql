/*
Deployment script for MenuDemoV1

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "MenuDemoV1"
:setvar DefaultFilePrefix "MenuDemoV1"
:setvar DefaultDataPath "C:\Users\aikio\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\MSSQLLocalDB\"
:setvar DefaultLogPath "C:\Users\aikio\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\MSSQLLocalDB\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Rename refactoring operation with key 20dc01ba-4592-4b51-b397-2053788ee250 is skipped, element [dbo].[Ateria].[sisaltaa] (SqlSimpleColumn) will not be renamed to Sisaltaa';


GO
PRINT N'Rename refactoring operation with key 2858cbb8-560b-4941-b922-cf5f9ea6ac47 is skipped, element [dbo].[Kategoria].[nimi] (SqlSimpleColumn) will not be renamed to Nimi';


GO
PRINT N'Rename refactoring operation with key e2ad8527-8093-4753-b078-9fbccdb57d66, 2bd3b0d0-7db1-413f-90e9-c82d168c2200 is skipped, element [dbo].[AllergJuom].[AllergiaId] (SqlSimpleColumn) will not be renamed to JuomaId';


GO
PRINT N'Rename refactoring operation with key d65daa0d-7cb7-4711-bf8b-03f4287d8796 is skipped, element [dbo].[Jalkiruoka].[AllergiaId] (SqlSimpleColumn) will not be renamed to AllergiaJalkId';


GO
PRINT N'Rename refactoring operation with key 564b3980-4a01-45f9-9bb4-fcb96010af35 is skipped, element [dbo].[Juoma].[AllergiaId] (SqlSimpleColumn) will not be renamed to AllergJuomId';


GO
PRINT N'Rename refactoring operation with key b7775488-e49f-46a8-ba9a-2d07bb3a1825 is skipped, element [dbo].[FK_KategAter_ToTable] (SqlForeignKeyConstraint) will not be renamed to [FK_KategAter_Kategoria]';


GO
PRINT N'Rename refactoring operation with key 62cd659d-be9a-4f33-89d6-a00e9b093393 is skipped, element [dbo].[Kategoria].[MenuId] (SqlSimpleColumn) will not be renamed to KategAterId';


GO
PRINT N'Rename refactoring operation with key 50f48fb3-2a57-43c5-8c96-06c64acc3a70 is skipped, element [dbo].[FK_Kategoria_RuokaLista] (SqlForeignKeyConstraint) will not be renamed to [FK_Kategoria_KategAter]';


GO
PRINT N'Rename refactoring operation with key ae11c579-50fc-4f02-98ee-25c09f1b7f75 is skipped, element [dbo].[RuokaLista].[RavintolaId] (SqlSimpleColumn) will not be renamed to RuokListKatId';


GO
PRINT N'Rename refactoring operation with key 627cf628-25c5-48ab-b6be-510744f7c38c is skipped, element [dbo].[FK_RuokaLista_Ravintola] (SqlForeignKeyConstraint) will not be renamed to [FK_RuokaLista_RuokListKat]';


GO
PRINT N'Rename refactoring operation with key 0404c148-6c37-495a-bc89-8b70a170b80e is skipped, element [dbo].[RuokaLista].[RavRuokList] (SqlSimpleColumn) will not be renamed to RavRuokListId';


GO
PRINT N'Creating [dbo].[Allergia]...';


GO
CREATE TABLE [dbo].[Allergia] (
    [Id]     INT           IDENTITY (1, 1) NOT NULL,
    [Nimi]   NVARCHAR (50) NOT NULL,
    [Tyyppi] NCHAR (10)    NOT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[AllergJalk]...';


GO
CREATE TABLE [dbo].[AllergJalk] (
    [Id]           INT IDENTITY (1, 1) NOT NULL,
    [JalkiruokaId] INT NULL,
    [AllergiaId]   INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[AllergJuom]...';


GO
CREATE TABLE [dbo].[AllergJuom] (
    [Id]         INT IDENTITY (1, 1) NOT NULL,
    [JuomaId]    INT NULL,
    [AllergiaId] INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[AllergRuok]...';


GO
CREATE TABLE [dbo].[AllergRuok] (
    [Id]         INT IDENTITY (1, 1) NOT NULL,
    [RuokaId]    INT NULL,
    [AllergiaId] INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[AllergSal]...';


GO
CREATE TABLE [dbo].[AllergSal] (
    [Id]         INT IDENTITY (1, 1) NOT NULL,
    [SalaattiId] INT NULL,
    [AllergiaId] INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Ateria]...';


GO
CREATE TABLE [dbo].[Ateria] (
    [Id]             INT            IDENTITY (1, 1) NOT NULL,
    [Nimi]           NVARCHAR (50)  NOT NULL,
    [Sisaltaa]       NVARCHAR (400) NULL,
    [Hinta]          DECIMAL (18)   NOT NULL,
    [KoottuAteriaId] INT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Jalkiruoka]...';


GO
CREATE TABLE [dbo].[Jalkiruoka] (
    [Id]           INT            IDENTITY (1, 1) NOT NULL,
    [Nimi]         NVARCHAR (50)  NOT NULL,
    [Hinta]        DECIMAL (18)   NOT NULL,
    [Sisaltaa]     NVARCHAR (400) NULL,
    [AllergJalkId] INT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Juoma]...';


GO
CREATE TABLE [dbo].[Juoma] (
    [Id]           INT           IDENTITY (1, 1) NOT NULL,
    [Nimi]         NVARCHAR (50) NOT NULL,
    [Hinta]        DECIMAL (18)  NOT NULL,
    [AnnosDl]      DECIMAL (18)  NULL,
    [AllergJuomId] INT           NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[KategAter]...';


GO
CREATE TABLE [dbo].[KategAter] (
    [Id]          INT IDENTITY (1, 1) NOT NULL,
    [KategoriaId] INT NULL,
    [AteriaId]    INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Kategoria]...';


GO
CREATE TABLE [dbo].[Kategoria] (
    [Id]            INT            IDENTITY (1, 1) NOT NULL,
    [Nimi]          NVARCHAR (50)  NOT NULL,
    [Description]   NVARCHAR (400) NULL,
    [KategAterId]   INT            NULL,
    [RuokListKatId] INT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[KoottuAteria]...';


GO
CREATE TABLE [dbo].[KoottuAteria] (
    [Id]           INT           IDENTITY (1, 1) NOT NULL,
    [Nimi]         NVARCHAR (50) NOT NULL,
    [JuomaId]      INT           NULL,
    [SalaattiId]   INT           NULL,
    [RuokaId]      INT           NULL,
    [JalkiruokaId] INT           NULL,
    [Hinta]        DECIMAL (18)  NOT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Ravintola]...';


GO
CREATE TABLE [dbo].[Ravintola] (
    [Id]            INT           IDENTITY (1, 1) NOT NULL,
    [Nimi]          NVARCHAR (50) NOT NULL,
    [Osoite]        NVARCHAR (50) NOT NULL,
    [Puhelinnumero] NVARCHAR (50) NOT NULL,
    [RavRuokListId] INT           NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[RavRuokList]...';


GO
CREATE TABLE [dbo].[RavRuokList] (
    [Id]           INT IDENTITY (1, 1) NOT NULL,
    [RavintolaId]  INT NULL,
    [RuokaListaId] INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Ruoka]...';


GO
CREATE TABLE [dbo].[Ruoka] (
    [Id]           INT           IDENTITY (1, 1) NOT NULL,
    [Nimi]         NVARCHAR (50) NOT NULL,
    [Hinta]        DECIMAL (18)  NOT NULL,
    [Sisaltaa]     NVARCHAR (50) NULL,
    [AllergRuokId] INT           NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[RuokaLista]...';


GO
CREATE TABLE [dbo].[RuokaLista] (
    [Id]            INT            IDENTITY (1, 1) NOT NULL,
    [Nimi]          NVARCHAR (50)  NOT NULL,
    [Description]   NVARCHAR (400) NULL,
    [RuokListKatId] INT            NULL,
    [RavRuokListId] INT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[RuokListKat]...';


GO
CREATE TABLE [dbo].[RuokListKat] (
    [Id]           INT IDENTITY (1, 1) NOT NULL,
    [RuokaListaId] INT NULL,
    [KategoriaId]  INT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[Salaatti]...';


GO
CREATE TABLE [dbo].[Salaatti] (
    [Id]          INT            IDENTITY (1, 1) NOT NULL,
    [Nimi]        NVARCHAR (50)  NOT NULL,
    [Hinta]       DECIMAL (18)   NOT NULL,
    [Sisaltaa]    NVARCHAR (400) NULL,
    [Kastike]     NVARCHAR (50)  NULL,
    [AllergSalId] INT            NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
);


GO
PRINT N'Creating [dbo].[FK_AllergJalk_Allergia]...';


GO
ALTER TABLE [dbo].[AllergJalk] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergJalk_Allergia] FOREIGN KEY ([AllergiaId]) REFERENCES [dbo].[Allergia] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergJalk_Jalkiruoka]...';


GO
ALTER TABLE [dbo].[AllergJalk] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergJalk_Jalkiruoka] FOREIGN KEY ([JalkiruokaId]) REFERENCES [dbo].[Jalkiruoka] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergJuom_Allergia]...';


GO
ALTER TABLE [dbo].[AllergJuom] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergJuom_Allergia] FOREIGN KEY ([AllergiaId]) REFERENCES [dbo].[Allergia] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergJuom_Juoma]...';


GO
ALTER TABLE [dbo].[AllergJuom] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergJuom_Juoma] FOREIGN KEY ([JuomaId]) REFERENCES [dbo].[Juoma] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergRuok_Allergia]...';


GO
ALTER TABLE [dbo].[AllergRuok] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergRuok_Allergia] FOREIGN KEY ([AllergiaId]) REFERENCES [dbo].[Allergia] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergRuok_Ruoka]...';


GO
ALTER TABLE [dbo].[AllergRuok] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergRuok_Ruoka] FOREIGN KEY ([RuokaId]) REFERENCES [dbo].[Ruoka] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergSal_Salaatti]...';


GO
ALTER TABLE [dbo].[AllergSal] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergSal_Salaatti] FOREIGN KEY ([SalaattiId]) REFERENCES [dbo].[Salaatti] ([Id]);


GO
PRINT N'Creating [dbo].[FK_AllergSal_Allergia]...';


GO
ALTER TABLE [dbo].[AllergSal] WITH NOCHECK
    ADD CONSTRAINT [FK_AllergSal_Allergia] FOREIGN KEY ([AllergiaId]) REFERENCES [dbo].[Allergia] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Ateria_KoottuAteria]...';


GO
ALTER TABLE [dbo].[Ateria] WITH NOCHECK
    ADD CONSTRAINT [FK_Ateria_KoottuAteria] FOREIGN KEY ([KoottuAteriaId]) REFERENCES [dbo].[KoottuAteria] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Jalkiruoka_AllergJalk]...';


GO
ALTER TABLE [dbo].[Jalkiruoka] WITH NOCHECK
    ADD CONSTRAINT [FK_Jalkiruoka_AllergJalk] FOREIGN KEY ([AllergJalkId]) REFERENCES [dbo].[AllergJalk] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Juoma_AllergJuom]...';


GO
ALTER TABLE [dbo].[Juoma] WITH NOCHECK
    ADD CONSTRAINT [FK_Juoma_AllergJuom] FOREIGN KEY ([AllergJuomId]) REFERENCES [dbo].[AllergJuom] ([Id]);


GO
PRINT N'Creating [dbo].[FK_KategAter_Kategoria]...';


GO
ALTER TABLE [dbo].[KategAter] WITH NOCHECK
    ADD CONSTRAINT [FK_KategAter_Kategoria] FOREIGN KEY ([KategoriaId]) REFERENCES [dbo].[Kategoria] ([Id]);


GO
PRINT N'Creating [dbo].[FK_KategAter_Ateria]...';


GO
ALTER TABLE [dbo].[KategAter] WITH NOCHECK
    ADD CONSTRAINT [FK_KategAter_Ateria] FOREIGN KEY ([AteriaId]) REFERENCES [dbo].[Ateria] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Kategoria_KategAter]...';


GO
ALTER TABLE [dbo].[Kategoria] WITH NOCHECK
    ADD CONSTRAINT [FK_Kategoria_KategAter] FOREIGN KEY ([KategAterId]) REFERENCES [dbo].[KategAter] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Kategoria_RuokListKat]...';


GO
ALTER TABLE [dbo].[Kategoria] WITH NOCHECK
    ADD CONSTRAINT [FK_Kategoria_RuokListKat] FOREIGN KEY ([RuokListKatId]) REFERENCES [dbo].[RuokListKat] ([Id]);


GO
PRINT N'Creating [dbo].[FK_KoottuAteria_Jalkiruoka]...';


GO
ALTER TABLE [dbo].[KoottuAteria] WITH NOCHECK
    ADD CONSTRAINT [FK_KoottuAteria_Jalkiruoka] FOREIGN KEY ([JalkiruokaId]) REFERENCES [dbo].[Jalkiruoka] ([Id]);


GO
PRINT N'Creating [dbo].[FK_KoottuAteria_Ruoka]...';


GO
ALTER TABLE [dbo].[KoottuAteria] WITH NOCHECK
    ADD CONSTRAINT [FK_KoottuAteria_Ruoka] FOREIGN KEY ([RuokaId]) REFERENCES [dbo].[Ruoka] ([Id]);


GO
PRINT N'Creating [dbo].[FK_KoottuAteria_Salaatti]...';


GO
ALTER TABLE [dbo].[KoottuAteria] WITH NOCHECK
    ADD CONSTRAINT [FK_KoottuAteria_Salaatti] FOREIGN KEY ([SalaattiId]) REFERENCES [dbo].[Salaatti] ([Id]);


GO
PRINT N'Creating [dbo].[FK_KoottuAteria_Juoma]...';


GO
ALTER TABLE [dbo].[KoottuAteria] WITH NOCHECK
    ADD CONSTRAINT [FK_KoottuAteria_Juoma] FOREIGN KEY ([JuomaId]) REFERENCES [dbo].[Juoma] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Ravintola_RavRuokList]...';


GO
ALTER TABLE [dbo].[Ravintola] WITH NOCHECK
    ADD CONSTRAINT [FK_Ravintola_RavRuokList] FOREIGN KEY ([RavRuokListId]) REFERENCES [dbo].[RavRuokList] ([Id]);


GO
PRINT N'Creating [dbo].[FK_RavRuokList_RuokaLista]...';


GO
ALTER TABLE [dbo].[RavRuokList] WITH NOCHECK
    ADD CONSTRAINT [FK_RavRuokList_RuokaLista] FOREIGN KEY ([RuokaListaId]) REFERENCES [dbo].[RuokaLista] ([Id]);


GO
PRINT N'Creating [dbo].[FK_RavRuokList_Ravintola]...';


GO
ALTER TABLE [dbo].[RavRuokList] WITH NOCHECK
    ADD CONSTRAINT [FK_RavRuokList_Ravintola] FOREIGN KEY ([RavintolaId]) REFERENCES [dbo].[Ravintola] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Ruoka_AllergRuok]...';


GO
ALTER TABLE [dbo].[Ruoka] WITH NOCHECK
    ADD CONSTRAINT [FK_Ruoka_AllergRuok] FOREIGN KEY ([AllergRuokId]) REFERENCES [dbo].[AllergRuok] ([Id]);


GO
PRINT N'Creating [dbo].[FK_RuokaLista_RuokListKat]...';


GO
ALTER TABLE [dbo].[RuokaLista] WITH NOCHECK
    ADD CONSTRAINT [FK_RuokaLista_RuokListKat] FOREIGN KEY ([RuokListKatId]) REFERENCES [dbo].[RuokListKat] ([Id]);


GO
PRINT N'Creating [dbo].[FK_RuokaLista_RavRuokList]...';


GO
ALTER TABLE [dbo].[RuokaLista] WITH NOCHECK
    ADD CONSTRAINT [FK_RuokaLista_RavRuokList] FOREIGN KEY ([RavRuokListId]) REFERENCES [dbo].[RavRuokList] ([Id]);


GO
PRINT N'Creating [dbo].[FK_RuokListKat_Kategoria]...';


GO
ALTER TABLE [dbo].[RuokListKat] WITH NOCHECK
    ADD CONSTRAINT [FK_RuokListKat_Kategoria] FOREIGN KEY ([KategoriaId]) REFERENCES [dbo].[Kategoria] ([Id]);


GO
PRINT N'Creating [dbo].[FK_RuokListKat_RuokaLista]...';


GO
ALTER TABLE [dbo].[RuokListKat] WITH NOCHECK
    ADD CONSTRAINT [FK_RuokListKat_RuokaLista] FOREIGN KEY ([RuokaListaId]) REFERENCES [dbo].[RuokaLista] ([Id]);


GO
PRINT N'Creating [dbo].[FK_Salaatti_AllergSal]...';


GO
ALTER TABLE [dbo].[Salaatti] WITH NOCHECK
    ADD CONSTRAINT [FK_Salaatti_AllergSal] FOREIGN KEY ([AllergSalId]) REFERENCES [dbo].[AllergSal] ([Id]);


GO
-- Refactoring step to update target server with deployed transaction logs
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '20dc01ba-4592-4b51-b397-2053788ee250')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('20dc01ba-4592-4b51-b397-2053788ee250')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '0cfd06a4-695d-4d92-b541-4621bc27418b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('0cfd06a4-695d-4d92-b541-4621bc27418b')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'aa33e0ad-bb6d-4cd8-b279-c170932f6127')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('aa33e0ad-bb6d-4cd8-b279-c170932f6127')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'c7bc551d-a48a-48c4-8d79-934cb8110687')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('c7bc551d-a48a-48c4-8d79-934cb8110687')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '07a0e0b6-7a32-4c97-a8e5-bc8df4b4c1cc')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('07a0e0b6-7a32-4c97-a8e5-bc8df4b4c1cc')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'ae19f6cb-4f0d-4d1c-ad46-0837a93344b8')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('ae19f6cb-4f0d-4d1c-ad46-0837a93344b8')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '01fb1763-8876-4b0b-aeea-23cc440b794e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('01fb1763-8876-4b0b-aeea-23cc440b794e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '6a52f215-72f8-4a5f-8914-5777a4da62f4')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('6a52f215-72f8-4a5f-8914-5777a4da62f4')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '72e2c2f8-35d4-4c3d-929a-a729fc554e7e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('72e2c2f8-35d4-4c3d-929a-a729fc554e7e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'da8ce692-8a9f-4e81-9461-53d2853ab7cc')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('da8ce692-8a9f-4e81-9461-53d2853ab7cc')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '2858cbb8-560b-4941-b922-cf5f9ea6ac47')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('2858cbb8-560b-4941-b922-cf5f9ea6ac47')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '28a7f6be-5106-432e-b15d-287f270d38aa')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('28a7f6be-5106-432e-b15d-287f270d38aa')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'd1bfc119-7fc1-4557-a1d2-392ff0c09852')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('d1bfc119-7fc1-4557-a1d2-392ff0c09852')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'b4abd6dd-ed20-4a37-b71f-49150190eda6')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('b4abd6dd-ed20-4a37-b71f-49150190eda6')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'c0d07376-5454-491b-9ccb-1786e76e74dd')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('c0d07376-5454-491b-9ccb-1786e76e74dd')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'be5060ca-8ccb-4dd2-b4d6-f68a9f307758')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('be5060ca-8ccb-4dd2-b4d6-f68a9f307758')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'ea9c5695-1528-4568-8109-faa571e8c32b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('ea9c5695-1528-4568-8109-faa571e8c32b')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '16a4b8ca-8fce-4497-8c3f-cf2d956fbd4d')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('16a4b8ca-8fce-4497-8c3f-cf2d956fbd4d')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'aa1e32ac-8987-4447-9f35-98082bfad559')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('aa1e32ac-8987-4447-9f35-98082bfad559')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'b771260a-f0af-4c4a-b546-875ead0a3112')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('b771260a-f0af-4c4a-b546-875ead0a3112')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'e2ad8527-8093-4753-b078-9fbccdb57d66')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('e2ad8527-8093-4753-b078-9fbccdb57d66')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '2bd3b0d0-7db1-413f-90e9-c82d168c2200')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('2bd3b0d0-7db1-413f-90e9-c82d168c2200')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'd65daa0d-7cb7-4711-bf8b-03f4287d8796')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('d65daa0d-7cb7-4711-bf8b-03f4287d8796')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '564b3980-4a01-45f9-9bb4-fcb96010af35')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('564b3980-4a01-45f9-9bb4-fcb96010af35')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'b7775488-e49f-46a8-ba9a-2d07bb3a1825')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('b7775488-e49f-46a8-ba9a-2d07bb3a1825')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '62cd659d-be9a-4f33-89d6-a00e9b093393')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('62cd659d-be9a-4f33-89d6-a00e9b093393')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '50f48fb3-2a57-43c5-8c96-06c64acc3a70')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('50f48fb3-2a57-43c5-8c96-06c64acc3a70')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'ae11c579-50fc-4f02-98ee-25c09f1b7f75')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('ae11c579-50fc-4f02-98ee-25c09f1b7f75')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '627cf628-25c5-48ab-b6be-510744f7c38c')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('627cf628-25c5-48ab-b6be-510744f7c38c')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '401b2bb9-731e-4734-bcca-f0041cbf1fdf')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('401b2bb9-731e-4734-bcca-f0041cbf1fdf')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '03f6b514-74cd-48bc-9d61-55cdb3f9d9a2')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('03f6b514-74cd-48bc-9d61-55cdb3f9d9a2')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '200d1b49-0ef1-4818-8581-0ae86da6e56a')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('200d1b49-0ef1-4818-8581-0ae86da6e56a')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '323e444d-14ec-4593-9617-a25489d407b9')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('323e444d-14ec-4593-9617-a25489d407b9')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '0404c148-6c37-495a-bc89-8b70a170b80e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('0404c148-6c37-495a-bc89-8b70a170b80e')

GO

GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [dbo].[AllergJalk] WITH CHECK CHECK CONSTRAINT [FK_AllergJalk_Allergia];

ALTER TABLE [dbo].[AllergJalk] WITH CHECK CHECK CONSTRAINT [FK_AllergJalk_Jalkiruoka];

ALTER TABLE [dbo].[AllergJuom] WITH CHECK CHECK CONSTRAINT [FK_AllergJuom_Allergia];

ALTER TABLE [dbo].[AllergJuom] WITH CHECK CHECK CONSTRAINT [FK_AllergJuom_Juoma];

ALTER TABLE [dbo].[AllergRuok] WITH CHECK CHECK CONSTRAINT [FK_AllergRuok_Allergia];

ALTER TABLE [dbo].[AllergRuok] WITH CHECK CHECK CONSTRAINT [FK_AllergRuok_Ruoka];

ALTER TABLE [dbo].[AllergSal] WITH CHECK CHECK CONSTRAINT [FK_AllergSal_Salaatti];

ALTER TABLE [dbo].[AllergSal] WITH CHECK CHECK CONSTRAINT [FK_AllergSal_Allergia];

ALTER TABLE [dbo].[Ateria] WITH CHECK CHECK CONSTRAINT [FK_Ateria_KoottuAteria];

ALTER TABLE [dbo].[Jalkiruoka] WITH CHECK CHECK CONSTRAINT [FK_Jalkiruoka_AllergJalk];

ALTER TABLE [dbo].[Juoma] WITH CHECK CHECK CONSTRAINT [FK_Juoma_AllergJuom];

ALTER TABLE [dbo].[KategAter] WITH CHECK CHECK CONSTRAINT [FK_KategAter_Kategoria];

ALTER TABLE [dbo].[KategAter] WITH CHECK CHECK CONSTRAINT [FK_KategAter_Ateria];

ALTER TABLE [dbo].[Kategoria] WITH CHECK CHECK CONSTRAINT [FK_Kategoria_KategAter];

ALTER TABLE [dbo].[Kategoria] WITH CHECK CHECK CONSTRAINT [FK_Kategoria_RuokListKat];

ALTER TABLE [dbo].[KoottuAteria] WITH CHECK CHECK CONSTRAINT [FK_KoottuAteria_Jalkiruoka];

ALTER TABLE [dbo].[KoottuAteria] WITH CHECK CHECK CONSTRAINT [FK_KoottuAteria_Ruoka];

ALTER TABLE [dbo].[KoottuAteria] WITH CHECK CHECK CONSTRAINT [FK_KoottuAteria_Salaatti];

ALTER TABLE [dbo].[KoottuAteria] WITH CHECK CHECK CONSTRAINT [FK_KoottuAteria_Juoma];

ALTER TABLE [dbo].[Ravintola] WITH CHECK CHECK CONSTRAINT [FK_Ravintola_RavRuokList];

ALTER TABLE [dbo].[RavRuokList] WITH CHECK CHECK CONSTRAINT [FK_RavRuokList_RuokaLista];

ALTER TABLE [dbo].[RavRuokList] WITH CHECK CHECK CONSTRAINT [FK_RavRuokList_Ravintola];

ALTER TABLE [dbo].[Ruoka] WITH CHECK CHECK CONSTRAINT [FK_Ruoka_AllergRuok];

ALTER TABLE [dbo].[RuokaLista] WITH CHECK CHECK CONSTRAINT [FK_RuokaLista_RuokListKat];

ALTER TABLE [dbo].[RuokaLista] WITH CHECK CHECK CONSTRAINT [FK_RuokaLista_RavRuokList];

ALTER TABLE [dbo].[RuokListKat] WITH CHECK CHECK CONSTRAINT [FK_RuokListKat_Kategoria];

ALTER TABLE [dbo].[RuokListKat] WITH CHECK CHECK CONSTRAINT [FK_RuokListKat_RuokaLista];

ALTER TABLE [dbo].[Salaatti] WITH CHECK CHECK CONSTRAINT [FK_Salaatti_AllergSal];


GO
PRINT N'Update complete.';


GO
